
<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Page Title</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="">
<style>
</style>
<body>

    <input type="file" id="fileInput"/>
    <button id="upButton">Upload</button>
    <table id="dataTable"></table>

</body>

<script>

    class Node {
      constructor (venue, start_time, end_time, venue_info) {
      this.venue = venue;
      this.start_time = start_time;
      this.end_time = end_time;
      this.venue_info = venue_info;

      this.next = null;
      this.prev = null;
      }
    }

    class DoubleLinkedList {
      constructor() {
        this.head = null;
        this.tail = null;
        this.length = 0;
      }
      // get size() {
      //   return this.length;
      // }
    }

    // function DoubleLinkedList() {
    //   this.head = null;
    //   this.tail = null;
    //   this.length = 0;
    // }

    DoubleLinkedList.size = function () {
      return this.length;
    }

    DoubleLinkedList.printNode = function () {
      console.log("head -> ");
      for (let node = this.head; node != null; node = node.next) {
        console.log(`${node.venue} -> `);
      }
    }

    DoubleLinkedList.append = function ( venue, start_time, end_time, venue_info) {
      let node = new Node(venue, start_time, end_time, venue_info);

      if (this.head == null) {
        this.head = node;
        this.tail = node;
      } else {
        this.tail.next = node;
        node.prev = this.tail;
        this.tail = node;
      }
      this.length++;
    }

    const fileInput = document.getElementById("fileInput");
    const uploadButton = document.getElementById("upButton");
    const dataTable = document.getElementById("dataTable");
    
    uploadButton.addEventListener("click", function() {
      const reader = new FileReader();
      reader.onload = function() {
        const csvData = reader.result;
        const lines = csvData.split("\n");
        let tableHTML = "<tr>";
        const header = lines[0].split(",");
        for (let headerVal of header) {
          tableHTML += "<th>" + headerVal + "</th>";
        }

        let venue;
        let start_time;
        let end_time;
        let venue_info;

        tableHTML += "</tr>";
        for (let i = 1; i < lines.length - 1; i++) {
          const row = lines[i].split(",");
          tableHTML += "<tr>";
          for (let rowVal of row) {
            tableHTML += "<td>" + rowVal + "</td>";
              venue = row[0];
              start_time = row[1];
              end_time = row[2];
              venue_info = row[3];
          }
          console.log(venue + start_time + end_time + venue_info);
          DoubleLinkedList.append(venue, start_time, end_time, venue_info);
          tableHTML += "</tr>";
        }

        console.log(DoubleLinkedList.printNode());
        

        console.log(DoubleLinkedList.size());

        console.log(DoubleLinkedList);


        dataTable.innerHTML = tableHTML;
      };
      reader.readAsText(fileInput.files[0]);
    });
    
</script>

</html>
